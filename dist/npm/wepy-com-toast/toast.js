"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _promise=require("./../babel-runtime/core-js/promise.js"),_promise2=_interopRequireDefault(_promise),_typeof2=require("./../babel-runtime/helpers/typeof.js"),_typeof3=_interopRequireDefault(_typeof2),_getPrototypeOf=require("./../babel-runtime/core-js/object/get-prototype-of.js"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("./../babel-runtime/helpers/classCallCheck.js"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("./../babel-runtime/helpers/createClass.js"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("./../babel-runtime/helpers/possibleConstructorReturn.js"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("./../babel-runtime/helpers/inherits.js"),_inherits3=_interopRequireDefault(_inherits2),_wepy=require("./../wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),Panel=function(e){function t(){var e,i,s,r;(0,_classCallCheck3.default)(this,t);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return i=s=(0,_possibleConstructorReturn3.default)(this,(e=t.__proto__||(0,_getPrototypeOf2.default)(t)).call.apply(e,[this].concat(a))),s.data={reveal:!1,img:"",animationData:"",imgClassName:"",imgMode:"scaleToFill",title:"载入中...",titleClassName:""},s.methods={},r=i,(0,_possibleConstructorReturn3.default)(s,r)}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"onLoad",value:function(){this.hasPromise=void 0!==(void 0===_promise2.default?"undefined":(0,_typeof3.default)(_promise2.default))}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.reveal=!0;for(var i in t)this[i]=t[i];if(this.$apply(),clearTimeout(this.__timeout),setTimeout(function(){var t=wx.createAnimation();t.opacity(1).step(),e.animationData=t.export(),e.reveal=!0,e.$apply()},30),0===t.duration){if(this.hasPromise)return new _promise2.default(function(e,i){setTimeout(function(){e(t)},430)});setTimeout(function(){return"function"==typeof t.success?t.success(t):t},430)}else{if(this.hasPromise)return new _promise2.default(function(i,s){e.__timeout=setTimeout(function(){e.toast(),i(t)},(t.duration||1500)+400)});this.__timeout=setTimeout(function(){e.toast(),"function"==typeof t.success&&t.success(t)},(t.duration||1500)+400)}}},{key:"toast",value:function(e){var t=!1;try{e?this.show(e):this.hide()}catch(e){t=e}if(this.hasPromise)return new _promise2.default(function(i,s){t?s(e):i(e)});t?"function"==typeof e.fail&&e.fail(e):"function"==typeof e.success&&e.success(e)}},{key:"hide",value:function(){clearTimeout(this.__timeout),this.reveal=!1;var e=wx.createAnimation();return e.opacity(0).step(),this.animationData=e.export(),this.$apply(),this.hasPromise?new _promise2.default(function(e,t){e()}):"function"==typeof data.success?data.success(data):void 0}}]),t}(_wepy2.default.component);exports.default=Panel;