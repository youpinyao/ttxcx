"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=require("./../npm/babel-runtime/core-js/object/get-prototype-of.js"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("./../npm/babel-runtime/helpers/classCallCheck.js"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("./../npm/babel-runtime/helpers/createClass.js"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("./../npm/babel-runtime/helpers/possibleConstructorReturn.js"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("./../npm/babel-runtime/helpers/inherits.js"),_inherits3=_interopRequireDefault(_inherits2),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_loading=require("./../services/loading.js"),_loading2=_interopRequireDefault(_loading),_util=require("./../services/util.js"),_util2=_interopRequireDefault(_util),_urls=require("./../services/urls.js"),_urls2=_interopRequireDefault(_urls),_request=require("./../services/request.js"),_request2=_interopRequireDefault(_request),_nullList=require("./../components/nullList.js"),_nullList2=_interopRequireDefault(_nullList),Rank=function(e){function t(){var e,r,u,n;(0,_classCallCheck3.default)(this,t);for(var l=arguments.length,s=Array(l),a=0;a<l;a++)s[a]=arguments[a];return r=u=(0,_possibleConstructorReturn3.default)(this,(e=t.__proto__||(0,_getPrototypeOf2.default)(t)).call.apply(e,[this].concat(s))),u.config={navigationBarTitleText:"排行榜",enablePullDownRefresh:!0},u.$props={"null-list":{"xmlns:wx":""}},u.$events={},u.components={"null-list":_nullList2.default},u.data={userInfo:null,rankData:null,type:"week"},u.computed={myScore:function(){if(u.rankData&&u.rankData.score){var e=_util2.default.renderScore(u.rankData.score),t="";return e.hour&&(t+=e.hour+"h"),e.minute&&(t+=e.minute+"min"),e.second&&(t+=e.second+"s"),t}return""}},u.methods={selectTab:function(e){_wepy2.default.pageScrollTo({scrollTop:0}),u.methods.updateRank(e)},updateRank:function(e){e&&(u.type=e),_request2.default.get(_urls2.default.rank,{type:u.data.type}).then(function(e){var t=e.result;u.rankData=t,u.methods.convertList(u.rankData.list),u.$apply(),_loading2.default.hide(),_wepy2.default.stopPullDownRefresh()})},convertList:function(e){_util2.default.each(e,function(e){var t=_util2.default.renderScore(e.score);e.score="",t.hour&&(e.score+=t.hour+"h"),t.minute&&(e.score+=t.minute+"min"),t.second&&(e.score+=t.second+"s")})}},u.events={},n=r,(0,_possibleConstructorReturn3.default)(u,n)}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"onPullDownRefresh",value:function(){this.methods.updateRank()}},{key:"onShow",value:function(){var e=this,t=this;_request2.default.getUserInfo().then(function(r){t.userInfo=r,e.methods.updateRank()})}},{key:"onLoad",value:function(){console.log("rank on load"),_loading2.default.show()}}]),t}(_wepy2.default.page);Page(require("./../npm/wepy/lib/wepy.js").default.$createPage(Rank,"pages/rank"));