"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=require("./../npm/babel-runtime/core-js/object/get-prototype-of.js"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("./../npm/babel-runtime/helpers/classCallCheck.js"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("./../npm/babel-runtime/helpers/createClass.js"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("./../npm/babel-runtime/helpers/possibleConstructorReturn.js"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("./../npm/babel-runtime/helpers/inherits.js"),_inherits3=_interopRequireDefault(_inherits2),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_urls=require("./../services/urls.js"),_urls2=_interopRequireDefault(_urls),_loading=require("./../services/loading.js"),_loading2=_interopRequireDefault(_loading),_util=require("./../services/util.js"),_util2=_interopRequireDefault(_util),_moment=require("./../npm/moment/moment.js"),_moment2=_interopRequireDefault(_moment),_request=require("./../services/request.js"),_request2=_interopRequireDefault(_request),_nullList=require("./../components/nullList.js"),_nullList2=_interopRequireDefault(_nullList),Me=function(e){function t(){var e,r,l,o;(0,_classCallCheck3.default)(this,t);for(var u=arguments.length,n=Array(u),a=0;a<u;a++)n[a]=arguments[a];return r=l=(0,_possibleConstructorReturn3.default)(this,(e=t.__proto__||(0,_getPrototypeOf2.default)(t)).call.apply(e,[this].concat(n))),l.config={navigationBarTitleText:"æˆ‘",enablePullDownRefresh:!0},l.$props={"null-list":{"xmlns:wx":""}},l.$events={},l.components={"null-list":_nullList2.default},l.data={userInfo:null,recordData:null,bookingData:null,userData:null,type:"booking"},l.computed={},l.methods={toChallenge:function(e){console.log("to challenge page",e),_wepy2.default.navigateTo({url:"/pages/challenge?id="+e})},selectTab:function(e){_wepy2.default.pageScrollTo({scrollTop:0}),l.type=e},updateRecord:function(){_request2.default.get(_urls2.default.record).then(function(e){var t=e.result;l.recordData=t,l.methods.convertData(l.recordData),l.$apply()})},updateBooking:function(){_request2.default.get(_urls2.default.booking).then(function(e){var t=e.result;l.bookingData=t,l.methods.convertData(l.bookingData),l.$apply()})},updateUser:function(){_request2.default.get(_urls2.default.user).then(function(e){var t=e.result;l.userData=t,l.$apply(),_loading2.default.hide(),_wepy2.default.stopPullDownRefresh()})},convertData:function(e){_util2.default.each(e,function(e){var t=(0,_moment2.default)(e.date);e.date1=t.format("YYYY-M"),e.date2=t.format("DD"),e.date3=t.format("HH:mm")})}},l.events={},o=r,(0,_possibleConstructorReturn3.default)(l,o)}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"onPullDownRefresh",value:function(){this.methods.updateBooking(),this.methods.updateRecord(),this.methods.updateUser()}},{key:"onShow",value:function(){var e=this,t=this;console.log("me on show"),_request2.default.getUserInfo().then(function(r){t.userInfo=r,e.methods.updateBooking(),e.methods.updateRecord(),e.methods.updateUser()})}},{key:"onLoad",value:function(){console.log("me on load"),_loading2.default.show()}}]),t}(_wepy2.default.page);Page(require("./../npm/wepy/lib/wepy.js").default.$createPage(Me,"pages/me"));